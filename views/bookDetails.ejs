<%- include('./partials/header.ejs') %>

<li>
    <h3><%= book.title %></h3>
    <p>Description: <%= book.description %></p>
    <p>Remaining copies: <%= book.pieces %></p>
    <p>Authors:<br>
        <% if (book.authors.includes(',')) { %>
            <% var authorsArray = book.authors.split(','); %>
            <% authorsArray.forEach(author => { %>
                &nbsp;&nbsp;&nbsp;&nbsp;.&nbsp;<%= author.trim() %><br>
            <% }); %>
        <% } else { %>
            &nbsp;&nbsp;&nbsp;&nbsp;.&nbsp;<%= book.authors.trim() %><br>
        <% } %>
    </p>
    <p>Categories:<br>
        <% if (book.categories && book.categories.includes(',')) { %>
            <% var categoriesArray = book.categories.split(','); %>
            <% categoriesArray.forEach(category => { %>
                &nbsp;&nbsp;&nbsp;&nbsp;.&nbsp;<%= category.trim() %><br>
            <% }); %>
        <% } else if (book.categories) { %>
            &nbsp;&nbsp;&nbsp;&nbsp;.&nbsp;<%= book.categories.trim() %><br>
        <% } %>
    </p>
    <p>Publisher: <%= book.publisher_name %></p>
    <p>Pages: <%= book.pages %></p>
    <p>Publish Year: <%= book.publish_year %></p>

    <% if (book.pieces > 0) { %>
        <form action="/cart/add/<%-book.isbn%>" method="post">
            <input type="hidden" name="bookId" value="<%= book.id %>">
            <button type="submit">Add to Cart</button>
        </form>
    <% } else { %>
        <p>Sorry, this book is currently out of stock.</p>
    <% } %>
</li>

<%- include('./partials/footer.ejs') %>
